<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>온라인 출입 시스템</title>
<link rel="stylesheet" href="./style.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body class="index-page">
<h1>휴 일 출 입 증<br>GIẤY XÁC NHẬN VÀO TRƯỜNG</h1>

<div id="personalForm">
  <div>
    <label>학번(Mã số lớp)</label>
    <input id="studentId" placeholder="학번 입력 또는 QR 스캔" />
  </div>

  <div>
    <label>이름(Họ tên)</label>
    <select id="studentName">
      <option>선택</option>
      <option>이성현</option>
      <option>김예건</option>
      <option>양지웅</option>
      <option>양찬희</option>
    </select>
  </div>

  <div>
    <label>사유(Lý do)</label>
    <select id="reason">
      <option>선택</option>
      <option>방과후 수업</option>
      <option>수학퍼실리테이터</option>
      <option>자습</option>
    </select>
  </div>

  <div>
    <label>지도교사(GV chủ nhiệm)</label>
    <select id="teacher">
      <option>선택</option>
      <option>김철수</option>
      <option>박선영</option>
      <option>최진호</option>
    </select>
  </div>

  <button id="generateQR">QR 생성</button>
</div>

<div id="qrBox" style="display:none; margin-top:2rem;">
  <h2>QR을 스캔하면 출입증이 표시됩니다.</h2>
  <div id="qrcode"></div>
</div>

<footer class="footer">
  <p>© 2025 Online Entry. All rights reserved.</p>
</footer>

<script>
document.getElementById("generateQR").addEventListener("click", () => {
  const id = document.getElementById("studentId").value.trim();
  const name = document.getElementById("studentName").value;
  const reason = document.getElementById("reason").value;
  const teacher = document.getElementById("teacher").value;

  if (!id || name === "선택" || reason === "선택" || teacher === "선택") {
    alert("모든 정보를 입력하세요.");
    return;
  }

  const entry = "허가됨(Đã được chấp nhận)";
  const use = "사용 안함(Chưa sử dụng)";
  const date = new Date().toISOString().split("T")[0];
  const base = "https://onlineschoolentry.github.io/onlineschoolentry/entry.html?";
  const params = new URLSearchParams({ id, name, reason, teacher, entry, use, date });

  document.getElementById("qrBox").style.display = "block";
  document.getElementById("qrcode").innerHTML = "";

  new QRCode(document.getElementById("qrcode"), {
    text: base + params.toString(),
    width: 256,
    height: 256
  });
});
</script>
</body>
</html>

